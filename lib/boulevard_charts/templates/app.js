!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},r={},a={},n={}.hasOwnProperty,i=/^\.\.?(\/|$)/,s=function(t,e){for(var r,a=[],n=(i.test(e)?t+"/"+e:e).split("/"),s=0,o=n.length;s<o;s++)r=n[s],".."===r?a.pop():"."!==r&&""!==r&&a.push(r);return a.join("/")},o=function(t){return t.split("/").slice(0,-1).join("/")},c=function(e){return function(r){var a=s(o(e),r);return t.require(a,e)}},l=function(t,e){var a=null;a=m&&m.createHot(t);var n={id:t,exports:{},hot:a};return r[t]=n,e(n.exports,c(t),n),n.exports},u=function(t){return a[t]?u(a[t]):t},d=function(t,e){return u(s(o(t),e))},p=function(t,a){null==a&&(a="/");var i=u(t);if(n.call(r,i))return r[i].exports;if(n.call(e,i))return l(i,e[i]);throw new Error("Cannot find module '"+t+"' from '"+a+"'")};p.alias=function(t,e){a[e]=t};var g=/\.[^.\/]+$/,f=/\/index(\.[^\/]+)?$/,h=function(t){if(g.test(t)){var e=t.replace(g,"");n.call(a,e)&&a[e].replace(g,"")!==e+"/index"||(a[e]=t)}if(f.test(t)){var r=t.replace(f,"");n.call(a,r)||(a[r]=t)}};p.register=p.define=function(t,a){if("object"==typeof t)for(var i in t)n.call(t,i)&&p.register(i,t[i]);else e[t]=a,delete r[t],h(t)},p.list=function(){var t=[];for(var r in e)n.call(e,r)&&t.push(r);return t};var m=t._hmr&&new t._hmr(d,p,e,r);p._cache=r,p.hmr=m&&m.wrap,p.brunch=!0,t.require=p}}(),function(){window;require.register("charts/column.js",function(t,e,r){"use strict";var a=e("../eventBus"),n=e("../formatters");r.exports=function(t,e){function r(t){var e=t.date,r=new Date(Date.parse(e)),a=s[r.getUTCMonth()],i=a+" "+r.getUTCDate();return"<span class='date'>"+i+"</span><br/><span> $"+n.formatMoney(t.total)+"</span>"}t.margin={top:50,right:20,bottom:25,left:20},t.width=parseInt(d3.select("#container").style("width"))-t.margin.right-t.margin.left,t.height=parseInt(d3.select("#container").style("height"))-t.margin.top-t.margin.bottom,e.attr("width",t.width+t.margin.left+t.margin.right).attr("height",t.height+t.margin.top+t.margin.bottom);var i=e.append("g").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=d3.scaleBand().rangeRound([0,t.width]).padding(.1).align(.1),c=d3.scaleLinear().rangeRound([t.height,0]),l=d3.select("body").append("div").attr("class","d3-tip");d3.stack();return t.processData=function(n){n=n.data,o.domain(n.map(function(t){return t.date})),c.domain([0,d3.max(n,function(t){return Number(t.total)})]).nice();var u=e.append("defs"),d=u.append("linearGradient").attr("id","Gradient").attr("x1","0").attr("x2","0").attr("y1","0").attr("y2",t.height).attr("gradientUnits","userSpaceOnUse");d.append("stop").attr("offset","0%").attr("stop-color","#d44061"),d.append("stop").attr("offset","100%").attr("stop-color","#b538a8");var p=u.append("linearGradient").attr("id","HoverGradient").attr("x1","0").attr("x2","0").attr("y1","0").attr("y2",t.height).attr("gradientUnits","userSpaceOnUse");p.append("stop").attr("offset","0%").attr("stop-color","#d85574"),p.append("stop").attr("offset","100%").attr("stop-color","#bf4cb3"),i.selectAll(".bar").data(n).enter().append("rect").attr("class","bar").attr("x",function(t){return o(t.date)}).attr("y",function(t){return console.log(t),c(t.total)}).attr("height",function(e){return t.height-c(Number(e.total))}).attr("width",o.bandwidth()).on("mousemove",function(t){l.style("left",d3.event.pageX+10+"px"),l.style("top",d3.event.pageY-25+"px"),l.style("display","inline-block"),l.html(r(t))}).on("mouseout",function(t){l.style("display","none")}),i.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+t.height+")").call(d3.axisBottom(o).tickFormat(function(t){var e=new Date(Date.parse(t));if(0===e.getUTCDay()){var r=s[e.getUTCMonth()];return r+" "+e.getUTCDate()}})),d3.selectAll("g.axis--x g.tick line").attr("y2",function(t){var e=new Date(Date.parse(t));return 0===e.getUTCDay()?6:0}),a.emit({source:"blvd:charts",message:"ready"})},t}}),require.register("charts/pie.js",function(t,e,r){"use strict";var a=e("../eventBus"),n=e("../formatters");r.exports=function(t,e){t.margin={top:0,right:0,bottom:0,left:0},t.width=parseInt(d3.select("#container").style("width"))-t.margin.right-t.margin.left,t.height=parseInt(d3.select("#container").style("height"))-t.margin.top-t.margin.bottom,e.attr("width",t.width+t.margin.left+t.margin.right).attr("height",t.height+t.margin.top+t.margin.bottom);var r=e.append("g").attr("transform","translate("+t.width/2+","+t.height/2+")");r.append("g").attr("class","slices"),r.append("g").attr("class","labels"),r.append("g").attr("class","lines");var i=Math.min(t.width,t.height)/2,s=(t.width,t.height,d3.pie().sort(null).value(function(t){return t.grossServiceRevenue})),o=d3.arc().outerRadius(.8*i).innerRadius(.4*i),c=d3.arc().outerRadius(.9*i).innerRadius(.9*i),l=d3.select("body").append("div").attr("class","d3-tip"),u=d3.scaleOrdinal(d3.schemeCategory20);return t.processData=function(t){function d(t){for(var e,r={},a=0,n=0;n<t.length;n++)e=t[n],a+=e[f],r[e[g]]=(r[e[g]]||0)+e[f];var i=[];return Object.keys(r).forEach(function(t){var e=Math.round(1e3*r[t]/a)/10,n={grossServiceRevenue:r[t],percentage:e};n[g]=t,i.push(n)}),i}function p(t){return t.startAngle+(t.endAngle-t.startAngle)/2}var g=t.aggregation.key,f=t.aggregation.aggregate;t=d(t.data);var h=r.select(".slices").selectAll("path.slice").data(function(e){return s(t)});h.enter().insert("path").attr("d",o.outerRadius(i).innerRadius(.6*i)).style("fill",function(t){return u(t.data[g])}).attr("class","slice").on("mousemove",function(t){l.style("left",d3.event.pageX+10+"px"),l.style("top",d3.event.pageY-25+"px"),l.style("display","inline-block"),l.html("<span class='date'>"+t.data[g]+"</span><br/><span> $"+n.formatMoney(t.data[f])+"</span>")}).on("mouseout",function(t){l.style("display","none")}),h.exit().remove();var m=function(t){return t.data[g]+": "+t.data.percentage+"%"},v=r.select(".labels").selectAll("text").data(function(e){return s(t)});v.enter().append("text").attr("dy",".35em").text(m).attr("transform",function(t){var e=c.centroid(t);return e[0]=i*(p(t)<Math.PI?1:-1),"translate("+e+")"}).attr("text-anchor",function(t){return p(t)<Math.PI?"start":"end"}),v.exit().remove();var y=e.select(".lines").selectAll("polyline").data(function(e){return s(t)});y.enter().append("polyline").attr("points",function(t){var e=c.centroid(t);return e[0]=.95*i*(p(t)<Math.PI?1:-1),[o.centroid(t),c.centroid(t),e].join(",")}),y.exit().remove(),a.emit({source:"blvd:charts",message:"ready"})},t}}),require.register("eventBus.js",function(t,e,r){"use strict";function a(t){i?i.postMessage(t):s.push(t)}function n(t){if("port:init"===t.data)for(i=t.ports[0];i&&s.length;)sendMessage(s.pop())}var i,s=[];window.addEventListener("message",n,!1),r.exports={emit:a}}),require.register("formatters.js",function(t,e,r){"use strict";function a(t){var e=2,r=".",a=",",n=t<0?"-":"",i=parseInt(t=Math.abs(+t||0).toFixed(e))+"",s=(s=i.length)>3?s%3:0;return n+(s?i.substr(0,s)+a:"")+i.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+a)+(e?r+Math.abs(t-i).toFixed(e).slice(2):"")}r.exports={formatMoney:a}}),require.register("initialize.js",function(t,e,r){"use strict";function a(t){function e(e,r){if(e)throw e;n||(n=r,c.emit({source:"blvd:charts",message:"data",data:r.data})),"donut"===r.chart_type?s(i,t):o(i,t),i.processData(r)}i||(i={}),n?e(null,n):d3.json("chart-data.json"+window.location.search,e)}var n,i,s=e("./charts/pie"),o=e("./charts/column"),c=e("./eventBus"),l=d3.select("#container");a(l),d3.select(window).on("resize",function(){l.selectAll("g").remove(),a(l)})}),require.register("___globals___",function(t,e,r){})}(),require("___globals___");