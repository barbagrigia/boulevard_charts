!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},r={},n={},a={}.hasOwnProperty,i=/^\.\.?(\/|$)/,s=function(t,e){for(var r,n=[],a=(i.test(e)?t+"/"+e:e).split("/"),s=0,o=a.length;s<o;s++)r=a[s],".."===r?n.pop():"."!==r&&""!==r&&n.push(r);return n.join("/")},o=function(t){return t.split("/").slice(0,-1).join("/")},c=function(e){return function(r){var n=s(o(e),r);return t.require(n,e)}},u=function(t,e){var n=null;n=m&&m.createHot(t);var a={id:t,exports:{},hot:n};return r[t]=a,e(a.exports,c(t),a),a.exports},l=function(t){return n[t]?l(n[t]):t},d=function(t,e){return l(s(o(t),e))},p=function(t,n){null==n&&(n="/");var i=l(t);if(a.call(r,i))return r[i].exports;if(a.call(e,i))return u(i,e[i]);throw new Error("Cannot find module '"+t+"' from '"+n+"'")};p.alias=function(t,e){n[e]=t};var h=/\.[^.\/]+$/,f=/\/index(\.[^\/]+)?$/,g=function(t){if(h.test(t)){var e=t.replace(h,"");a.call(n,e)&&n[e].replace(h,"")!==e+"/index"||(n[e]=t)}if(f.test(t)){var r=t.replace(f,"");a.call(n,r)||(n[r]=t)}};p.register=p.define=function(t,n){if("object"==typeof t)for(var i in t)a.call(t,i)&&p.register(i,t[i]);else e[t]=n,delete r[t],g(t)},p.list=function(){var t=[];for(var r in e)a.call(e,r)&&t.push(r);return t};var m=t._hmr&&new t._hmr(d,p,e,r);p._cache=r,p.hmr=m&&m.wrap,p.brunch=!0,t.require=p}}(),function(){window;require.register("charts/column.js",function(t,e,r){"use strict";var n=e("../eventBus"),a=e("../formatters");r.exports=function(t,e){function r(t){var e=t.date,r=new Date(Date.parse(e)),n=i[r.getUTCMonth()],s=n+" "+r.getUTCDate();return"<span class='date'>"+s+"</span><br/><span> $"+a.formatMoney(t.total)+"</span>"}t.margin={top:50,right:20,bottom:25,left:20},t.width=parseInt(d3.select("#container").style("width"))-t.margin.right-t.margin.left,t.height=parseInt(d3.select("#container").style("height"))-t.margin.top-t.margin.bottom,e.attr("width",t.width+t.margin.left+t.margin.right).attr("height",t.height+t.margin.top+t.margin.bottom),e=e.append("g").attr("transform","translate("+t.margin.left+","+t.margin.top+")");var i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=d3.scale.ordinal().rangeRoundBands([0,t.width],.1),o=d3.scale.linear().range([t.height,0]),c=d3.svg.axis().scale(s).tickFormat(function(t){var e=new Date(Date.parse(t));if(0===e.getUTCDay()){var r=i[e.getUTCMonth()];return r+" "+e.getUTCDate()}}).orient("bottom"),u=d3.tip().attr("class","d3-tip").offset([-10,0]).html(r);return e.call(u),t.processData=function(r){r=r.data,s.domain(r.map(function(t){return t.date})),e.append("g").attr("class","x axis").attr("transform","translate(0,"+t.height+")").call(c).selectAll("text").attr("y",14).attr("x",0).attr("dy",".35em").style("text-anchor","middle"),d3.selectAll("g.x.axis g.tick line").attr("y2",function(t){var e=new Date(Date.parse(t));return 0===e.getUTCDay()?6:0}),o.domain([0,d3.max(r,function(t){return Number(t.total)})]);var a=e.append("defs"),i=a.append("linearGradient").attr("id","Gradient").attr("x1","0").attr("x2","0").attr("y1","0").attr("y2",t.height).attr("gradientUnits","userSpaceOnUse");i.append("stop").attr("offset","0%").attr("stop-color","#d44061"),i.append("stop").attr("offset","100%").attr("stop-color","#b538a8");var l=a.append("linearGradient").attr("id","HoverGradient").attr("x1","0").attr("x2","0").attr("y1","0").attr("y2",t.height).attr("gradientUnits","userSpaceOnUse");l.append("stop").attr("offset","0%").attr("stop-color","#d85574"),l.append("stop").attr("offset","100%").attr("stop-color","#bf4cb3"),e.selectAll(".bar").data(r).enter().append("rect").attr("class","bar").attr("x",function(t){return s(t.date)}).attr("width",s.rangeBand()).attr("y",function(t){return o(Number(t.total))}).attr("height",function(e){return t.height-o(Number(e.total))}).on("mouseover",u.show).on("mouseout",u.hide),n.emit({source:"blvd:charts",message:"ready"})},t}}),require.register("charts/pie.js",function(t,e,r){"use strict";var n=e("../eventBus"),a=e("../formatters");r.exports=function(t,e){t.margin={top:0,right:0,bottom:0,left:0},t.width=parseInt(d3.select("#container").style("width"))-t.margin.right-t.margin.left,t.height=parseInt(d3.select("#container").style("height"))-t.margin.top-t.margin.bottom,e.attr("width",t.width+t.margin.left+t.margin.right).attr("height",t.height+t.margin.top+t.margin.bottom),e=e.append("g").attr("transform","translate("+t.width/2+","+t.height/2+")"),e.append("g").attr("class","slices"),e.append("g").attr("class","labelName"),e.append("g").attr("class","labelValue"),e.append("g").attr("class","lines");var r=Math.min(t.width,t.height)/2,i=(t.width,t.height,d3.layout.pie().sort(null).value(function(t){return t.grossServiceRevenue})),s=d3.svg.arc().outerRadius(.8*r).innerRadius(.4*r),o=d3.svg.arc().innerRadius(.9*r).outerRadius(.9*r),c=d3.select("body").append("div").attr("class","toolTip"),u=d3.scale.category20(),l=d3.scale.ordinal().range(u.range());return t.processData=function(t){function u(t){for(var e,r={},n=0,a=0;a<t.length;a++)e=t[a],n+=e[h],r[e[p]]=(r[e[p]]||0)+e[h];var i=[];return Object.keys(r).forEach(function(t){var e=Math.round(1e3*r[t]/n)/10,a={grossServiceRevenue:r[t],percentage:e};a[p]=t,i.push(a)}),i}function d(t){return t.startAngle+(t.endAngle-t.startAngle)/2}var p=t.aggregation.key,h=t.aggregation.aggregate;t=u(t.data);var f=e.select(".slices").selectAll("path.slice").data(i(t),function(t){return t.data[p]});f.enter().insert("path").style("fill",function(t){return l(t.data[p])}).attr("class","slice"),f.transition().duration(1e3).attrTween("d",function(t){this._current=this._current||t;var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return s(e(t))}}),f.on("mousemove",function(t){c.style("left",d3.event.pageX+10+"px"),c.style("top",d3.event.pageY-25+"px"),c.style("display","inline-block"),c.html(t.data[p]+"<br> $"+a.formatMoney(t.data[h]))}),f.on("mouseout",function(t){c.style("display","none")}),f.exit().remove();var g=e.select(".labelName").selectAll("text").data(i(t),function(t){return t.data[p]});g.enter().append("text").attr("dy",".35em").text(function(t){return t.data[p]+": "+t.data.percentage+"%"}),g.transition().duration(1e3).attrTween("transform",function(t){this._current=this._current||t;var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){var n=e(t),a=o.centroid(n);return a[0]=r*(d(n)<Math.PI?1:-1),"translate("+a+")"}}).styleTween("text-anchor",function(t){this._current=this._current||t;var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){var r=e(t);return d(r)<Math.PI?"start":"end"}}).text(function(t){return t.data[p]+": "+t.data.percentage+"%"}),g.exit().remove();var m=e.select(".lines").selectAll("polyline").data(i(t),function(t){return t.data[p]});m.enter().append("polyline"),m.transition().duration(1e3).attrTween("points",function(t){this._current=this._current||t;var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){var n=e(t),a=o.centroid(n);return a[0]=.95*r*(d(n)<Math.PI?1:-1),[s.centroid(n),o.centroid(n),a]}}),m.exit().remove(),n.emit({source:"blvd:charts",message:"ready"})},t}}),require.register("eventBus.js",function(t,e,r){"use strict";function n(t){i?i.postMessage(t):s.push(t)}function a(t){if("port:init"===t.data)for(i=t.ports[0];i&&s.length;)sendMessage(s.pop())}var i,s=[];window.addEventListener("message",a,!1),r.exports={emit:n}}),require.register("formatters.js",function(t,e,r){"use strict";function n(t){var e=2,r=".",n=",",a=t<0?"-":"",i=parseInt(t=Math.abs(+t||0).toFixed(e))+"",s=(s=i.length)>3?s%3:0;return a+(s?i.substr(0,s)+n:"")+i.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+n)+(e?r+Math.abs(t-i).toFixed(e).slice(2):"")}r.exports={formatMoney:n}}),require.register("initialize.js",function(t,e,r){"use strict";function n(t){function e(e,r){if(e)throw e;a||(a=r,c.emit({source:"blvd:charts",message:"data",data:r.data})),"donut"===r.chart_type?s(i,t):o(i,t),i.processData(r)}i||(i={}),a?e(null,a):d3.json("chart-data.json"+window.location.search,e)}var a,i,s=e("./charts/pie"),o=e("./charts/column"),c=e("./eventBus"),u=d3.select("#container");n(u),d3.select(window).on("resize",function(){u.selectAll("g").remove(),n(u)})}),require.register("___globals___",function(t,e,r){})}(),require("___globals___");